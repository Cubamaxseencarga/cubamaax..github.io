!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8a14e469-6b34-4c9e-b108-03e24348f148",e._sentryDebugIdIdentifier="sentry-dbid-8a14e469-6b34-4c9e-b108-03e24348f148")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3984],{13984:function(e,t,n){n.d(t,{ZO:function(){return w.Z},aU:function(){return a.a},DG:function(){return i},Ym:function(){return o},a_:function(){return y}});let i=(0,n(43061).Ue)(e=>({open:!1,setOpenDialog:t=>e({open:t})}));var a=n(24594),s=n(98931);let o=()=>{let[e,t]=(0,s.useState)(!0),[n,i]=(0,s.useState)(),[a,o]=(0,s.useState)(!1),[r,l]=(0,s.useState)(!1);return{states:{isForm:e,otpCode:n,openDialog:a,otpCodeExpire:r},actions:{setIsForm:t,setOpenDialog:o,closeDialog:()=>{o(!1),t(!0)},onOptInputChange:i,setOtpCodeExpire:l}}};var r=n(74848),l=n(69578),c=n(8447),u=n(4559),d=n(19068),f=n(40563),m=n(60823),p=n.n(m);let v={apiKey:"AIzaSyCn7HmTYsxKFp0gBP1zztgfX4hihdIU60Y",authDomain:"cubamax.firebaseapp.com",projectId:"cubamax",storageBucket:"cubamax.appspot.com",appId:"1:754729476970:web:499e86d927e22cd0687b13",messagingSenderId:"754729476970"},h={init:async()=>{try{if(!await (0,f.Gb)())return null;let e=(0,d.ZF)(v),t=(0,f.KL)(e),n=await Notification.requestPermission(),i=await p().getItem(c.ut);if(null!==i)return(0,l.setCookie)(c.ut,i),i;if("granted"===n&&navigator.onLine){let e=await (0,f.LP)(t,{vapidKey:"BA2dKMlQS8UTWx5ofJEy4E1wEiUmDHQ3a9tF3zFKJoPM1JvG-E89zVVwU5vHCuxvuXnvvf_UpcqRDm03zZasgzA"});if(e)return await p().setItem(c.ut,e),(0,l.setCookie)(c.ut,e),e}}catch(e){return null}}};async function g(){try{await h.init()}catch(e){}}let y=()=>{let{setNotification:e}=(0,r.Gu)(),t=(0,s.useRef)(),n=(0,s.useRef)(),i=(0,r.It)(e=>e.setNotificationCountResponse),{cookies:a}=(0,u._4)(),o=a[c.ut],d=async()=>{let e=(0,l.getCookie)(c.LA);e&&i(await (0,r.of)({accessToken:e,appHeader:"web"}))};(0,s.useEffect)(()=>{o||g()},[o]),(0,s.useEffect)(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",async i=>{var a,s,o,r;let l=null===(a=i.data.firebaseMessaging)||void 0===a?void 0:a.payload,c=null==l?void 0:l.data,u=null==l?void 0:l.fcmMessageId,f=(null==l?void 0:null===(s=l.notification)||void 0===s?void 0:s.title)||"",m=(null==l?void 0:null===(o=l.notification)||void 0===o?void 0:o.body)||"",p=(null==l?void 0:null===(r=l.notification)||void 0===r?void 0:r.image)||"",v="".concat(f," - ").concat(m).toLowerCase(),h=v===n.current,g=null==c?void 0:c.serviceId,y=null==c?void 0:c.operationId,w=null==c?void 0:c.cardLastFour,x=null==c?void 0:c.timeLeft;if(h)return;t.current=u,n.current=v,e({title:f,body:m,meta:{imgUrl:p,serviceKey:(null==c?void 0:c.serviceKey)||"",service:(null==c?void 0:c.entity)||"",history:(null==c?void 0:c.history)==="true",serviceDetailsId:(null==c?void 0:c.serviceDetailsId)||"",butonLabel:(null==c?void 0:c.buttonLabel)||"",serviceEnabled:!!(null==c?void 0:c.serviceEnabled),serviceId:g,operationId:y,cardLastFour:w,timeLeft:x}});let b=await navigator.serviceWorker.getRegistration();f&&await Promise.allSettled([d(),null==b?void 0:b.showNotification(f,{body:m,image:p})]),n.current=""})},[])};var w=n(54456)},27248:function(e,t,n){n.d(t,{q:function(){return u}});var i=n(60823),a=n.n(i),s=n(8447),o=n(46101),r=n(28032),l=n(37839),c=n(78819);let u=()=>{let{resetShopCart:e}=(0,l.M)(e=>({resetShopCart:e.resetShopCart})),t=(0,r.w)(e=>e.resetRemittanceStore),n=(0,o.Oz)(e=>e.resetUser),i=(0,c.aW)(e=>e.reset);return{clearCacheStorage:o=>{(null==o?void 0:o.notRemoveShopStore)||e(),t(),n(),i(),(0,s.f5)()&&localStorage.clear(),(0,s.Bh)()&&sessionStorage.clear(),(null==o?void 0:o.notRemoveFcm)||a().removeItem("fcm_token")}}}},54456:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(4559),a=n(59250),s=n(31262),o=n(45640),r=n(27248);let l=e=>{let t=(0,a.tv)(),{clearCacheStorage:n}=(0,r.q)(),l=e=>{n({notRemoveShopStore:null==e?void 0:e.notRemoveShopStore})},c=e=>{l(),null==e||e(),t.replace(s.am.Login),t.refresh()},{getAccessToken:u,...d}=(0,i.dQ)({onError:t=>{var n;return(null==e?void 0:e.noLogout)||(null==e?void 0:e.onError)?null===(n=e.onError)||void 0===n?void 0:n.call(e):c(null==t?void 0:t.deleteTokens)}});return{getAccessToken:()=>u("web",o.i8),closeSession:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.am.Home,n=arguments.length>1?arguments[1]:void 0;l(n),d.deleteTokens(),t.replace(e),t.refresh()},...d}}},24594:function(e,t,n){n.d(t,{a:function(){return l}});var i=n(4559),a=n(36146),s=n(9474),o=n(31262),r=n(54456);let l=()=>{let e=(0,s.useRouter)(),{closeSession:t,getAccessToken:n}=(0,r.Z)({noLogout:!0}),l=(0,o.fs)(e=>e.setLoading);return{handleLogout:async s=>{(0,a.c)(),e.prefetch(s||o.am.Home),l(!0);let r=await n();r&&await (0,i.kS)({appHeader:"web",accessToken:r}),t(s),l(!1),(0,a.C)()},closeSession:t}}},73692:function(e,t,n){n.d(t,{a:function(){return s}});var i=n(43061),a=n(50149);let s=(0,i.Ue)()((0,a.tJ)(e=>({showAddNewDocument:!1,document:null,identityDocumentTypes:[],identityDocuments:[],setShowAddNewDocument:t=>e({showAddNewDocument:t}),setDocument:t=>e(e=>({document:t?{...e.document,...t}:null})),setIdentityDocumentTypes:t=>e({identityDocumentTypes:t}),setIdentityDocuments:t=>e({identityDocuments:t}),reset:()=>e({showAddNewDocument:!1,document:null,identityDocumentTypes:[],identityDocuments:[]})}),{name:"add-identity-document",storage:(0,a.FL)(()=>sessionStorage),partialize:e=>{var t,n,i,a,s;return{...e,document:{documentType:null===(t=e.document)||void 0===t?void 0:t.documentType,documentNumber:null===(n=e.document)||void 0===n?void 0:n.documentNumber,issuedDate:null===(i=e.document)||void 0===i?void 0:i.issuedDate,expirationDate:null===(a=e.document)||void 0===a?void 0:a.expirationDate,documentIssuedBy:null===(s=e.document)||void 0===s?void 0:s.documentIssuedBy}}}}))},52061:function(e,t,n){n.d(t,{ME:function(){return s},Wk:function(){return o},dY:function(){return r},xb:function(){return l}});var i=n(8447),a=n(31262);let s=async e=>{let{accessToken:t}=e,n=await i.WY.get("/profile/identity-documents",(0,a.wU)({accessToken:t})),s=await n.json();return(0,i.SW)({data:s,status:n.status})},o=async e=>{let{document:t,accessToken:n}=e,s=await i.WY.post("/profile/identity-documents",t,(0,a.wU)({customHeaders:{"content-type":"multipart/form-data"},accessToken:n})),o=await s.json();return(0,i.SW)({data:o,status:s.status})},r=async e=>{let{id:t,accessToken:n}=e,s=await i.WY.delete("/profile/identity-documents/".concat(t),(0,a.wU)({accessToken:n})),o=await s.json();return(0,i.SW)({data:o,status:s.status})},l=async e=>{let{accessToken:t}=e,n=await i.WY.get("/nomenclatures/identity-documents/v2/types",(0,a.wU)({accessToken:t})),s=await n.json();return(0,i.SW)({data:s,status:n.status})}},78819:function(e,t,n){n.d(t,{qe:function(){return u},Le:function(){return d},dc:function(){return m},k9:function(){return h},Wk:function(){return g.Wk},dY:function(){return g.dY},Ie:function(){return f},aW:function(){return i.a}});var i=n(73692),a=n(86576),s=n(68947),o=n(8447),r=n(16274),l=n(7425),c=n(31262);let u={PassportCardUS:"Passport Card US",DriverLicense:"Driver License",IDOfficial:"ID Official",AlienCard:"Alien Card",FLDriverLicense:"FLDriverLicense"},d={code:"FL",maxLength:13,errorMessage:"remittance.invalidIdentityDocumentFL"},f=[u.DriverLicense,u.IDOfficial],m=["SocialSecurity","IDOfficial"],p=r.z.string().min(1,{message:l.om.Required}),v=r.z.object({documentType:r.z.string({required_error:l.om.Required}).trim().min(1,l.om.Required),issuedDate:(0,o.QY)({requiredMessage:l.om.Required}),expirationDate:(0,o.QY)({requiredMessage:l.om.Required}),imgIdentityDoc:r.z.any().refine(e=>e instanceof File||e instanceof Blob,{message:l.om.Required}).refine(e=>e.size<=l.bR,{message:l.om.FileSizeError}).refine(e=>l.dr.includes(e.type),{message:l.om.FileTypeError})}),h=e=>{var t;let{selectedProvince:n,type:i,identityDocumentTypes:o}=e,m=i.replaceAll(" ",""),h=d.errorMessage,g=null===(t=o.find(e=>e.type.replaceAll(" ","")===m))||void 0===t?void 0:t.errorMessage;g&&(h=g);let y=f.includes(i),w=n===d.code&&y;w&&(h=l.om.InvalidIdentityDocumentFL,m=u.FLDriverLicense);let x=o.reduce((e,t)=>(e[t.type]||(e[t.type.replaceAll(" ","")]=null),e[t.type.replaceAll(" ","")]=new RegExp(t.regExp.replaceAll("/","")),w&&(e.FLDriverLicense=/^[A-Z][0-9]{12}$/),e),{}),b=v.merge(r.z.object({documentNumber:p.refine(e=>{var t;return null===(t=x[m])||void 0===t?void 0:t.test(e)},{message:h})})).superRefine((e,t)=>{let n=(0,a.J)(e.issuedDate),i=(0,a.J)(e.expirationDate);n&&!(10>=(0,s.o)(new Date,e.issuedDate))&&t.addIssue({code:r.z.ZodIssueCode.custom,message:l.om.IssuedDateMoreThan10Years,path:["issuedDate"]}),i&&!(e.expirationDate>e.issuedDate||e.expirationDate.getMonth()>new Date().getMonth())&&t.addIssue({code:r.z.ZodIssueCode.custom,message:l.om.ExpirationDateBeforeIssuedDate,path:["expirationDate"]})});return y?b.and(r.z.object({documentIssuedBy:c.QT})):b};var g=n(52061)},28032:function(e,t,n){n.d(t,{w:function(){return o}});var i=n(43061),a=n(50149);let s={currentStep:1,ofacType:null,resume:null,remittance:null,sendData:null},o=(0,i.Ue)()((0,a.tJ)(e=>({...s,setCurrentStep:t=>e({currentStep:t}),setSendData:t=>e(e=>t?{...e,sendData:{...e.sendData,...t}}:{...e,sendData:null}),setResume:t=>e({resume:t}),setRemittance:t=>e({remittance:t}),setOfac:t=>e(e=>{var n;return{...e,ofacType:{...e.ofacType,...t,ofac:{...null===(n=e.ofacType)||void 0===n?void 0:n.ofac,...null==t?void 0:t.ofac}}}}),resetRemittanceStore:()=>e(s)}),{name:"remittance",storage:(0,a.FL)(()=>sessionStorage)}))},37839:function(e,t,n){n.d(t,{G:function(){return a},M:function(){return l}});var i,a,s=n(43061),o=n(50149);(i=a||(a={}))[i.CART_RESUME=1]="CART_RESUME",i[i.SHIPPING_DETAILS=2]="SHIPPING_DETAILS",i[i.SENDER_INFO=3]="SENDER_INFO",i[i.IDENTITY_DOCUMENTS=4]="IDENTITY_DOCUMENTS",i[i.BENEFICIARY=5]="BENEFICIARY",i[i.RESUME=6]="RESUME";let r={currentStep:1,cart:null,receiveContactId:null,shipping:null,documentIdentityId:null,categories:null,missingShipmentProducts:[],loadingCategories:!1,canFetchLocalCart:!1,note:""},l=(0,s.Ue)()((0,o.tJ)(e=>({...r,setCart:t=>e({cart:t}),setCurrentStep:t=>e({currentStep:t}),setReceiveContactId:t=>e({receiveContactId:t}),setShipping:t=>e({shipping:t}),setDocumentIdentityId:t=>e({documentIdentityId:t}),resetShopCart:()=>e(r),setCategories:t=>e({categories:t}),setMissingShipmentProducts:t=>e({missingShipmentProducts:t}),setLoadingCategories:t=>e({loadingCategories:t}),setShippingErrorDetails:t=>e({shippingErrorDetails:t}),setCanFetchLocalCart:t=>e({canFetchLocalCart:t}),setNote:t=>e({note:t})}),{name:"shop"}))},74848:function(e,t,n){n.d(t,{JU:function(){return x},xv:function(){return S},no:function(){return f},of:function(){return u},It:function(){return D},Gu:function(){return N}});var i=n(20043),a=n(72566),s=n(56291),o=n(82302),r=n(98931),l=n(8447);let c=e=>{let{accessToken:t,appHeader:n="web",locale:i="es"}=e;return{Authorization:"Bearer ".concat(t),app:n,"Accept-Language":i}},u=async e=>{let{accessToken:t,appHeader:n="web",locale:i="es"}=e,a=await l.WY.get("/notification/count",{cache:"no-store",headers:c({accessToken:t,appHeader:n,locale:i})});return{...await a.json(),statusCode:a.status,success:(0,l.d6)(a.status)}},d=async e=>{let{notificationId:t,accessToken:n,appHeader:i,locale:a}=e,s=await l.WY.post("/notification/".concat(t),{},{headers:c({accessToken:n,appHeader:i,locale:a})});return{...await s.json(),statusCode:s.status,success:(0,l.d6)(s.status)}},f=async e=>{let{notificationId:t,accessToken:n,appHeader:i,locale:a}=e,s=await l.WY.delete("/notification/".concat(t),{headers:c({accessToken:n,appHeader:i,locale:a})});return{...await s.json(),statusCode:s.status,success:(0,l.d6)(s.status)}},m=async e=>{let{accessToken:t,appHeader:n,locale:i,notificationIds:a}=e,s=await l.WY.delete("/notification",{headers:c({accessToken:t,appHeader:n,locale:i})},{notificationIds:a});return{...await s.json(),statusCode:s.status,success:(0,l.d6)(s.status)}},p=async e=>{let{accessToken:t,queryParams:n,appHeader:i,locale:a}=e,s=new URLSearchParams;Object.entries(n).forEach(e=>{let[t,n]=e;(0,l.xb)(n)||s.append(t,String(n))});let o=await l.WY.get("".concat("/notification","?").concat(s.toString()),{headers:c({accessToken:t,appHeader:i,locale:a}),cache:"no-store"});return{...await o.json(),statusCode:o.status,success:(0,l.d6)(o.status)}};var v=n(43061);let h=(0,v.Ue)(e=>({openCard:!1,setOpenCard:t=>e({openCard:t})})),g=(0,v.Ue)(e=>({selectedNotifications:[],hasSelectedNotifications:!1,isSelectedAllValue:!1,setIsSelectedAllValue:t=>e({isSelectedAllValue:t}),addSelectedNotification:t=>{e(e=>e.selectedNotifications.find(e=>e.id===t.id)?e:{selectedNotifications:[...e.selectedNotifications,t],hasSelectedNotifications:!0})},removeSelectedNotification:t=>{e(e=>{let n=e.selectedNotifications.filter(e=>e.id!==t.id);return{selectedNotifications:n,hasSelectedNotifications:n.length>0}})},setSelectedNotifications:t=>e({selectedNotifications:t,hasSelectedNotifications:!!t.length})})),y=e=>{let{notificationCount:t,getAccessToken:n,appHeader:i="web",locale:a="es"}=e,[o,l]=(0,r.useState)(null!=t?t:0),[c,u]=(0,r.useState)([]),{openCard:v,setOpenCard:y}=h(),{hasSelectedNotifications:w,setSelectedNotifications:x,isSelectedAllValue:b,selectedNotifications:S,setIsSelectedAllValue:N}=g(),[D,I]=(0,r.useState)(!1),[j,C]=(0,r.useTransition)(),[E,k]=(0,r.useTransition)(),L=(0,r.useRef)(1),R=(0,r.useRef)(!1),A=e=>{C(async()=>{var t,s,o;let r=await n();if(!r)return;let{data:d,success:f}=await p({appHeader:i,locale:a,accessToken:r,queryParams:{order:"DESC",take:null!==(t=null==e?void 0:e.take)&&void 0!==t?t:10,page:null!==(s=null==e?void 0:e.page)&&void 0!==s?s:1}});if(!f)return;let{notifications:m,hasNextPage:v}=d,h=(null==e?void 0:e.merge)?[...c,...m]:m;l(d.unreadedCount),u(h),I(!v),R.current=v,(null==e?void 0:e.merge)||(L.current=null!==(o=null==e?void 0:e.page)&&void 0!==o?o:1)})},T=async e=>{y(e),e?A({take:c.length||10}):(I(!R.current),u([]),x([]))},U=async()=>{if(D)return;let e=L.current+1;L.current=e,A({merge:!0,page:e})},z=async e=>{let{id:t,isRead:o}=e,r=await n();if(!r)return;let{success:u,message:d}=await f({accessToken:r,notificationId:t,appHeader:i,locale:a});u&&(o||l(e=>e-1),A({take:c.length<=10?10:c.length-1}),L.current=1,(0,s.Amu)({description:d}))},F=async e=>{if(T(!1),e.read)return;let t=await n(),{success:s}=await d({notificationId:e.id,accessToken:t,appHeader:i,locale:a});s&&l(e=>e-1)};return{states:{count:o,notifications:c,isLoading:j,openCard:v,disabledLoadMoreButton:D,hasSelectedNotifications:w,isSelectedAllValue:b,isLoadingDeleteMultiple:E},actions:{setOpenCard:y,handleSelectAllNotifications:e=>{N(e),x(e?c:[])},handleOpenCard:T,handleLoadMore:U,handleDeleteNotification:z,handleOpenNotification:F,handleSelectNotification:(e,t)=>{"remove"===t?N(!1):N(S.length+1===c.length)},handleDeleteMultiplesNotifications:()=>{k(async()=>{let e=await n();if(!e)return;let t=S.filter(e=>e.read).length,o=S.map(e=>Number(e.id)),{success:r,message:u}=await m({accessToken:e,notificationIds:o,appHeader:i,locale:a});r&&(x([]),t&&l(e=>e-t),A({take:c.length<=10?10:c.length-1}),L.current=1,(0,s.Amu)({description:u}))})}}}},w=e=>{let{checkboxLabel:t,onSelectAllNotifications:n,hasSelectedNotifications:a,isSelectedAllValue:r,onDeleteNotifications:l}=e;return(0,i.jsxs)("div",{className:(0,o.cn)("sticky top-0 z-10 flex items-center justify-between px-4 py-2 border-b shadow-sm bg-slate-100 opacity-0 transition-all -translate-y-full h-9",{"opacity-100 translate-y-0":a}),children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(s.XZJ,{checked:r,id:"select-all-notifications",onCheckedChange:n}),(0,i.jsx)("label",{htmlFor:"select-all-notifications",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t})]}),(0,i.jsx)("button",{className:"ml-auto hover:scale-110",onClick:l,onTouchStart:e=>e.stopPropagation(),type:"button",children:(0,i.jsx)(s.Bf1,{className:"w-5 h-5 text-destructive"})})]})},x=e=>{let{children:t,notificationCount:n,loadMoreButtonText:r,noNotificationsText:l,getAccessToken:c,appHeader:u="web",locale:d="es",selectAllLabel:f="Seleccionar todo"}=e,[m]=(0,a.u)(),{actions:{handleOpenCard:p,handleDeleteNotification:v,handleLoadMore:h,handleOpenNotification:g,handleSelectAllNotifications:x,handleSelectNotification:b,handleDeleteMultiplesNotifications:S},states:{openCard:N,count:D,notifications:I,isLoading:j,disabledLoadMoreButton:C,hasSelectedNotifications:E,isSelectedAllValue:k,isLoadingDeleteMultiple:L}}=y({notificationCount:(null==n?void 0:n.data)?Number(n.data):0,getAccessToken:c,appHeader:u,locale:d}),R=I.length>0&&!C;return(0,i.jsxs)(s.h_2,{onOpenChange:p,open:N,children:[(0,i.jsx)(s.$FS,{asChild:!0,children:(0,i.jsxs)(s.zxk,{className:"relative font-normal !ring-0 !ring-offset-0 !outline-0 !border-none",size:"icon",variant:"ghost",children:[(0,i.jsx)(s.CcJ,{className:(0,o.cn)("top-0 left-4",j&&"bg-white"),variant:"secondary",children:j?(0,i.jsx)(s.Ujj,{className:"w-full h-full animate-spin text-primary stroke-[4px]"}):D}),(0,i.jsx)(s.shf,{})]})}),j&&!I.length?null:(0,i.jsxs)(s.AWV,{className:(0,o.cn)("relative p-0 w-[22.175rem] sm:w-[35rem]  overflow-y-auto max-h-[500px] pb-[35px] transition-all",{"pb-[35]":!R}),sideOffset:15,children:[L&&(0,i.jsx)("div",{inert:!0,className:"absolute inset-0 z-20 flex items-center justify-center bg-white/70",children:(0,i.jsx)(s.Ujj,{className:"self-center mr-1 size-12 animate-spin text-primary"})}),!!I.length&&(0,i.jsx)(w,{onDeleteNotifications:S,isSelectedAllValue:k,checkboxLabel:f,onSelectAllNotifications:x,hasSelectedNotifications:E}),!I.length&&(0,i.jsx)("p",{className:"p-4 text-center",children:l}),(0,i.jsx)("div",{ref:m,className:(0,o.cn)("transition-all",{"-top-9":!E,"top-0":E}),children:t({notifications:I,handleDeleteNotification:v,handleOpenNotification:g,handleSelectNotification:b})}),R&&(0,i.jsxs)("button",{className:"fixed bottom-0 left-0 right-0 z-10 flex justify-center p-1 font-bold transition-all md:w-full rounded-b-md bg-slate-200 hover:bg-slate-300 item-center disabled:cursor-not-allowed disabled:bg-slate-100 disabled:hover:bg-slate-100",disabled:C,onClick:h,type:"button",children:[j&&(0,i.jsx)(s.Ujj,{className:"self-center w-4 h-4 mr-1 animate-spin"}),r]})]})]})},b=e=>{let{onOpenNotification:t,notification:n,onDeleteNotification:i,onSetNotification:a,onSelectNotification:s}=e,[o,l]=(0,r.useTransition)(),{selectedNotifications:c,addSelectedNotification:u,removeSelectedNotification:d}=g(),f=h(e=>e.setOpenCard);return{states:{isPendingDelete:o,isSelectedNotification:c.map(e=>e.id).includes(n.id)},actions:{handleOpenNotification:()=>{o||(f(!1),a(n),t(n))},handleDeleteNotification:e=>{e.stopPropagation(),o||l(async()=>{await i({id:n.id.toString(),isRead:n.read})})},handleSelectNotification:e=>{e.stopPropagation(),o||(c.map(e=>e.id).includes(n.id)?(s(n,"remove"),d(n)):(s(n,"add"),u(n)))}}}},S=e=>{var t;let{locale:n,notification:a,onDeleteNotification:c,onOpenNotification:u,onSetNotification:d,onSelectNotification:f}=e,{states:{isPendingDelete:m,isSelectedNotification:p},actions:{handleDeleteNotification:v,handleOpenNotification:h,handleSelectNotification:g}}=b({notification:a,onOpenNotification:u,onDeleteNotification:c,onSetNotification:d,onSelectNotification:f}),y=(0,r.useMemo)(()=>{var e,t;return(0,s.Efr)(null!==(t=null===(e=a.meta)||void 0===e?void 0:e.service)&&void 0!==t?t:"OTHER")},[null===(t=a.meta)||void 0===t?void 0:t.service]);return(0,i.jsxs)("div",{className:(0,o.cn)("flex items-center justify-between px-4 py-1 space-x-1 border-b",a.read?"hover:bg-muted":"hover:bg-accent"),onClick:h,onKeyDown:e=>{"Enter"===e.key&&h()},role:"button",tabIndex:0,children:[(0,i.jsxs)("div",{className:"flex items-center w-3/4 gap-2 sm:w-[55%]",children:[(0,i.jsx)("button",{className:(0,o.cn)("p-2 rounded-full",a.read?"bg-slate-300":"bg-primary"),onClick:g,onTouchStart:e=>e.stopPropagation(),children:p?(0,i.jsx)(s.nQG,{className:"w-5 h-5",color:a.read?"#353c46":"#E9E9E9"}):(0,i.jsx)(y,{className:"w-5 h-5",color:a.read?"#353c46":"#E9E9E9"})}),(0,i.jsxs)("div",{className:"w-full space-y-1",children:[(0,i.jsx)("p",{className:(0,o.cn)("text-base font-bold ellipsis w-auto",a.read?"text-[#353c46]":"text-primary"),children:a.title}),(0,i.jsx)("p",{className:(0,o.cn)("text-sm ellipsis",a.read?"text-slate-400":"text-green-700"),children:a.body}),(0,i.jsx)("p",{className:"block text-sm sm:hidden text-muted-foreground",children:(0,l.fZ)({createdAt:a.createdAt,locale:n})})]})]}),(0,i.jsxs)("div",{className:"flex flex-col flex-1 gap-1",children:[(0,i.jsxs)("div",{className:"flex flex-col items-end justify-end gap-2 sm:flex-row sm:whitespace-nowrap",children:[(0,i.jsx)("p",{className:"hidden text-sm sm:block text-muted-foreground",children:(0,l.fZ)({createdAt:a.createdAt,locale:n})}),!a.read&&(0,i.jsx)(s.Uos,{className:(0,o.cn)("w-5 h-5 fill-primary stroke-primary")})]}),m?(0,i.jsx)(s.Ujj,{className:"w-5 h-5 block ml-auto animate-spin text-destructive stroke-[4px]"}):(0,i.jsx)("button",{className:"ml-auto hover:scale-110",id:"delete-notification-button",onClick:v,onTouchStart:e=>e.stopPropagation(),type:"button",children:(0,i.jsx)(s.Bf1,{className:"w-5 h-5 text-destructive"})})]})]})},N=(0,v.Ue)(e=>({notification:null,setNotification:t=>e({notification:t})})),D=(0,v.Ue)(e=>({setNotificationCountResponse:t=>e({notificationCountResponse:t})}))}}]);