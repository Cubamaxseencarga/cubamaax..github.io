!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="07167389-4c08-4267-afbf-e09a87d90511",e._sentryDebugIdIdentifier="sentry-dbid-07167389-4c08-4267-afbf-e09a87d90511")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4559],{70012:function(e,t,r){r.r(t),r.d(t,{LoginForm:function(){return a}});var n=r(20043),i=r(56291),s=r(12365),o=r(3936);let a=e=>{let{children:t,requestCodeButtonText:r,emailQuestion:a,expirationAlertTitle:l,headerTitle:u,phoneQuestion:d,continueButtonText:c,enterButtonText:f,emailInputLabel:v,phoneInputLabel:p,spanText:h,appHeader:m="web",lang:x,version:g,activeCountries:y,onLogin:j,onRequestCode:w,onLoginError:b,translate:k}=e,{actions:{handleChangeInputType:C,handleLogin:q,handleChangeOtpCode:S,handleShowOtpCodeInput:I,handleRequestOtpCode:_,cleanErrorsMessages:E},values:{form:R,isPhone:T,showInputOtpCode:z,isOtpExpired:N,otpCodeInputRef:O,otpMinutes:A,otpSeconds:W,alertErrors:L,isInvalidOtpCode:D,otpCode:P}}=(0,s.f)({onLogin:j,onRequestCode:w,onLoginError:b,appHeader:m,locale:x,version:g}),B=D||R.formState.isSubmitting||z&&(N||!!P&&P.length<6);return(0,n.jsx)(i.Zbd,{className:"shadow-md bg-[#f5f5f5] md:w-[24.25rem] w-full",children:(0,n.jsx)(i.aYP,{className:"px-4 py-8 md:px-8",children:(0,n.jsx)(i.l09,{...R,children:(0,n.jsxs)("form",{autoComplete:"off",noValidate:!0,className:"flex flex-col justify-center w-full h-full space-y-8 ",onSubmit:q,children:[z?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{credentialQuestion:T?d:a,headerTitle:u,ref:O,credentialValue:T?R.getValues("phone"):R.getValues("email"),expirationAlertTitle:l,expirationOptMinutes:A,expirationOptSecond:W,onCredentialQuestionClick:()=>{I("credentialQuestButton")},handleRequestOtpCode:_,onOptCodeInputChange:S,isOtpExpired:N,requestCodeButtonText:r,isLoadingRequestCodeButton:R.formState.isSubmitting}),(0,n.jsx)(i.$hO,{errors:L,translate:k,onClose:E})]}):(0,n.jsxs)("div",{children:[T?(0,n.jsx)(i.WiK,{control:R.control,name:"phone",render:e=>{let{field:t}=e;return(0,n.jsxs)(i.xJW,{children:[(0,n.jsx)(i.lXp,{children:p}),(0,n.jsx)(i.NIc,{children:(0,n.jsx)(i.sbj,{country:"us",...t,disableDropdown:!1,onlyCountries:y,inputProps:{autoFocus:!0}})}),(0,n.jsx)(i.zGS,{t:k})]})}}):(0,n.jsx)(i.WiK,{control:R.control,name:"email",render:e=>{let{field:t}=e;return(0,n.jsxs)(i.xJW,{children:[(0,n.jsx)(i.lXp,{children:v}),(0,n.jsx)(i.NIc,{children:(0,n.jsx)(i.U50,{...t,type:"email",autoFocus:!0,className:"lowercase",placeholder:"user@domain.com"})}),(0,n.jsx)(i.zGS,{t:k})]})}}),(0,n.jsxs)("div",{className:"flex items-center gap-1 sm:justify-start ",children:[(0,n.jsx)("span",{children:h}),(0,n.jsx)(i.zxk,{onClick:C,className:"px-0 text-base text-black underline hover:text-primary",variant:"link",type:"button",children:T?v:p})]})]}),(0,n.jsx)(i.zxk,{disabled:B,type:"submit",isLoading:R.formState.isSubmitting&&!N,children:z?c:f}),!z&&t]})})})})}},83592:function(e,t,r){r.r(t),r.d(t,{MaxmindScriptProvider:function(){return o}});var n=r(8447),i=r(98931),s=r(83176);let o=()=>{let{cookies:e}=(0,s._)(),t=e[n.II];return(0,i.useEffect)(()=>{t||(async()=>{await (0,n.AG)()})()},[t]),null}},3936:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(20043),i=r(56291),s=e=>{let{titleAlert:t,otpMinutes:r="00",otpSeconds:i="00"}=e;return(0,n.jsxs)("p",{children:[t," ",(0,n.jsxs)("span",{className:"text-secondary",children:[r,":",i]})]})},o=(0,r(98931).forwardRef)((e,t)=>{let{credentialQuestion:r,credentialValue:o,expirationAlertTitle:a,expirationOptMinutes:l,expirationOptSecond:u,headerTitle:d,isOtpExpired:c,isLoadingRequestCodeButton:f,requestCodeButtonText:v,onCredentialQuestionClick:p,onOptCodeInputChange:h,handleRequestOtpCode:m}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,n.jsx)("p",{children:d}),(0,n.jsx)("p",{children:o}),(0,n.jsx)(i.zxk,{className:"text-destructive",onClick:p,type:"button",variant:"ghost",children:r}),c?(0,n.jsx)(i.zxk,{onClick:m,type:"button",variant:"ghost",isLoading:f,children:v}):(0,n.jsx)(s,{titleAlert:a,otpMinutes:l,otpSeconds:u})]}),!c&&(0,n.jsx)(i.rbi,{ref:t,onChange:h})]})})},77242:function(e,t,r){r.d(t,{F:function(){return l}});var n=r(69578),i=r(8447),s=r(60823),o=r.n(s),a=r(98931);let l=e=>{let t=(0,a.useRef)();return(0,a.useEffect)(()=>{let r=navigator.userAgent;(async()=>{let s=(0,i.dz)({userAgent:r,version:e}),a=null;try{a=await o().getItem(i.ut)}catch(t){let e=(0,n.getCookie)(i.ut)||"";a=(0,i.Jx)(e)}t.current={...s,version:e,fcmToken:a||void 0}})()},[]),{deviceInfo:t}}},83176:function(e,t,r){r.d(t,{_:function(){return s}});var n=r(98931),i=r(7924);let s=()=>{let e=new i.Z,[t,r]=(0,n.useState)(()=>e.getAll({doNotUpdate:!0}));return(0,n.useEffect)(()=>{let t=()=>{r(e.getAll({doNotUpdate:!0}))};return e.addChangeListener(t),()=>{e.removeChangeListener(t)}},[]),{cookies:t}}},12365:function(e,t,r){r.d(t,{f:function(){return v}});var n=r(40284),i=r(43779),s=r(8447),o=r(98931),a=r(83998),l=r(12918),u=r(28879),d=r(53124),c=r(17533),f=r(77242);let v=e=>{let{onLogin:t,onRequestCode:r,onLoginError:v,appHeader:p="web",locale:h,version:m}=e,[x,g]=(0,o.useState)(!0),[y,j]=(0,o.useState)(void 0),[w,b]=(0,o.useState)(!1),[k,C]=(0,o.useState)(!1),[q,S]=(0,o.useState)(""),[I,_]=(0,o.useState)(""),{deviceInfo:E}=(0,f.F)(m),{updateTokens:R}=(0,c.d)(),T=(0,o.useRef)(null),z=(0,a.cI)({resolver:(0,n.F)((0,u.vL)(h)),values:x?{phone:""}:{email:""}}),{seconds:N,minutes:O,start:A,restart:W,pause:L,isRunning:D}=(0,l.useTimer)({expiryTimestamp:(0,i.v)(new Date,(0,s.un)(!0)),onExpire:()=>{C(!0)},autoStart:!1});(0,o.useEffect)(()=>{},[]),(0,o.useEffect)(()=>{!x&&w&&W((0,i.v)(new Date,(0,s.un)(x)))},[w,x]);let P=x?"phone":"mail",B=[I,q].filter(Boolean),F=!y&&w,M=()=>{S(""),_("")},V=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,s.un)(x),n="continueButton"===e&&!D&&t;"credentialQuestButton"!==e||t||(L(),C(!1)),n&&N<r&&W((0,i.v)(new Date,(0,s.un)(x))),n&&N===r&&A(),b(t)},K=()=>{var e;return null===(e=T.current)||void 0===e?void 0:e.clear()},J=async e=>{var t,n,o,a,l;if(!k)return;K();let c=E.current,f=(0,u.HK)(h).safeParse({device:c});if(!f.success){let e=null===(n=f.error.flatten().fieldErrors)||void 0===n?void 0:null===(t=n.device)||void 0===t?void 0:t[0];return _(null!=e?e:"")}let v={...e,device:f.data.device},m=(0,u.e4)(h).safeParse(v);if(!m.success){let e=null===(o=m.error.flatten())||void 0===o?void 0:o.fieldErrors;return _(null!==(l=null==e?void 0:null===(a=e.device)||void 0===a?void 0:a[0])&&void 0!==l?l:"")}let g=await (0,d.x4)(P,m.data,p,h);g.success&&w&&(W((0,i.v)(new Date,(0,s.un)(x))),C(!1),M()),r&&r(g)},Z=async e=>{var r,n,i,o,a;let l=(0,u.VP)(h).safeParse({otpCode:y});if(w&&!(null==l?void 0:l.success)){let e=null===(i=l.error.flatten().fieldErrors)||void 0===i?void 0:null===(n=i.otpCode)||void 0===n?void 0:n[0];return S(null!=e?e:"")}let c=E.current,f=(0,u.HK)(h).safeParse({device:c});if(!f.success){let e=null===(a=f.error.flatten().fieldErrors)||void 0===a?void 0:null===(o=a.device)||void 0===o?void 0:o[0];return _(null!=e?e:"")}let m={...e,device:f.data.device};w&&l.success&&(m.otpCode=l.data.otpCode);let x=await (0,d.x4)(P,m,p,h);if((null===(r=x.errorsDetails)||void 0===r?void 0:r.code)===s.RA.PO_08)return z.setError("phone",{message:"global.formErrors.invalidPhone"});x.success&&!w?V("continueButton",!0):x.success&&w&&(M(),R({accessToken:x.data.accessToken,refreshToken:x.data.refreshToken,fcmToken:m.device.fcmToken}),t&&t(x)),!x.success&&v&&v(x)};return{values:{isPhone:x,form:z,otpInputErrorMessage:q,deviceInfoError:I,showInputOtpCode:w,isOtpExpired:k,otpMinutes:(0,s.Iq)(O),otpSeconds:(0,s.Iq)(N),isInvalidOtpCode:F,otpCode:y,alertErrors:B,otpCodeInputRef:T},actions:{cleanErrorsMessages:M,handleChangeInputType:()=>{g(!x),C(!1),z.reset(),z.clearErrors(["email","phone"])},handleLogin:z.handleSubmit(Z),handleChangeOtpCode:e=>{M(),j(e)},handleShowOtpCodeInput:V,handleRequestOtpCode:z.handleSubmit(J)}}}},17533:function(e,t,r){r.d(t,{d:function(){return o}});var n=r(69578),i=r(8447),s=r(53124);let o=e=>{let{[i.LA]:t,[i.z6]:r}=(0,n.getCookies)(),o=e=>{let{accessToken:t,refreshToken:r,fcmToken:s}=e,{accessTokenPayload:o,refreshTokenPayload:a}=(0,i.Ai)({accessToken:t,refreshToken:r});(0,n.setCookie)(i.LA,t,{expires:(0,i.vq)(o.exp)}),(0,n.setCookie)(i.z6,r,{expires:(0,i.vq)(a.exp)}),s&&(0,n.setCookie)(i.ut,s,{expires:(0,i.vq)(a.exp)})},a=()=>{(0,n.deleteCookie)(i.LA),(0,n.deleteCookie)(i.z6),(0,n.deleteCookie)(i.II),(0,n.deleteCookie)(i.ut)},l=async e=>{let{refreshToken:t,appHeader:r}=e,{data:n,success:a,errors:l,message:u,statusCode:d}=await (0,s.Zu)(t,r);if(!n||!a)throw new i.MS(u,l,d,JSON.stringify(l));return o({accessToken:n.accessToken,refreshToken:n.refreshToken}),n.accessToken};return{getAccessToken:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"web",r=arguments.length>1?arguments[1]:void 0;try{let{[i.LA]:e,[i.z6]:a,[i.II]:u,[i.ut]:d}=(0,n.getCookies)();if(!e&&!a)throw Error("Tokens missing");if(!e&&a){let e=u||null,n=navigator.userAgent;if(!e)return await l({refreshToken:a,appHeader:t});let c={deviceKey:e,fcmToken:d,appVersion:r,model:(0,i.qs)(n),operatingSystem:(0,i.Ij)(n),type:(0,i.l7)(n)},{success:f,data:v,errors:p,statusCode:h,message:m}=await (0,s.v6)({body:c,appHeader:t,refreshTokenValue:a});if(!f&&h===i.ou.BadRequest.code)return await l({refreshToken:a,appHeader:t});if(!f&&h!==i.ou.BadRequest.code)throw new i.MS(m,p,h,JSON.stringify(p));return o({accessToken:v.accessToken,refreshToken:v.refreshToken}),v.accessToken}return e&&await (0,i.WX)(e),e}catch(t){(null==e?void 0:e.onError)&&e.onError({deleteTokens:a,error:t})}},deleteTokens:a,updateTokens:o,accessToken:t,refreshToken:r}}},4559:function(e,t,r){r.d(t,{U0:function(){return n.LoginForm},nn:function(){return a},kS:function(){return m.kS},Fy:function(){return l.F},_4:function(){return u._},lT:function(){return p},dQ:function(){return h.d}});var n=r(70012);r(3936);var i=r(20043),s=r(56291),o=r(19008);let a=e=>{let{children:t}=e;return(0,i.jsx)("div",{className:"shadow-md bg-[#f5f5f5] md:w-[24.25rem] w-full",children:(0,i.jsx)("div",{className:"px-4 py-8 md:px-8",children:(0,i.jsxs)("div",{className:"flex flex-col justify-center w-full h-full space-y-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)(s.xJW,{children:[(0,i.jsx)(s.OdW,{className:"w-[176px] h-4 bg-slate-300"}),(0,i.jsx)(s.OdW,{className:(0,o.u)()})]}),(0,i.jsx)("div",{className:"flex items-center gap-1 mt-2 sm:justify-start",children:(0,i.jsx)(s.OdW,{className:"h-6 w-[183px] bg-slate-300"})})]}),(0,i.jsx)(s.OdW,{className:"h-10 space-y-8 bg-slate-300"}),t]})})})};r(83592);var l=r(77242),u=r(83176);r(12365);var d=r(98931),c=r(12918),f=r(43779),v=r(8447);let p=e=>{let{isPhone:t=!0}=e,[r,n]=(0,d.useState)(!1),{seconds:i,minutes:s,start:o,restart:a,pause:l,isRunning:u}=(0,c.useTimer)({expiryTimestamp:(0,f.v)(new Date,(0,v.un)(t)),onExpire:()=>{n(!0)},autoStart:!1});return(0,d.useEffect)(()=>{o()},[]),{states:{otpSeconds:i,otpMinutes:s,isOtpExpired:r,isRunningOtp:u},actions:{restartTimer:()=>{a((0,f.v)(new Date,(0,v.un)(t)))},setIsOtpExpired:n,pauseOtp:l,startTimerOtp:o}}};var h=r(17533);r(28879);var m=r(53124)},28879:function(e,t,r){r.d(t,{HK:function(){return a},VP:function(){return l},e4:function(){return u},vL:function(){return o}});var n=r(8447),i=r(16274);let s=e=>e?{InvalidOtpCode:"global.formErrors.invalidOtpCode",InvalidPhone:"global.formErrors.invalidPhone",InvalidDeviceInfo:"global.formErrors.invalidDeviceInfo",InvalidEmail:"global.formErrors.invalidEmail",Required:"global.formErrors.required"}:{Required:"Campo obligatorio",InvalidEmail:"Correo electr\xf3nico invalido",InvalidPhone:"N\xfamero de tel\xe9fono invalido",InvalidOtpCode:"C\xf3digo de otp invalido",InvalidDeviceInfo:"Informaci\xf3n de dispositivo invalida"},o=e=>{let t=s(e);return i.z.union([i.z.object({email:i.z.string({invalid_type_error:t.Required,required_error:t.Required}).trim().toLowerCase().min(1,{message:t.Required}).email({message:t.InvalidEmail}).pipe((0,n.yz)({invalidMessage:t.InvalidEmail,requiredMessage:t.Required}))}),i.z.object({phone:(0,n.te)({requiredMessage:t.Required,invalidMessage:t.InvalidPhone})})])},a=e=>{let t=s(e);return i.z.object({device:i.z.object({appVersion:i.z.string({invalid_type_error:t.Required,required_error:t.Required}),deviceKey:i.z.string({invalid_type_error:t.Required,required_error:t.Required}).min(1,t.Required),model:i.z.string({invalid_type_error:t.Required,required_error:t.Required}),operatingSystem:i.z.string({invalid_type_error:t.Required,required_error:t.Required}),type:i.z.string({invalid_type_error:t.Required,required_error:t.Required}),fcmToken:i.z.string({invalid_type_error:t.Required,required_error:t.Required}).optional()})})},l=e=>{let t=s(e);return i.z.object({otpCode:i.z.string({invalid_type_error:t.Required,required_error:t.Required}).min(6,t.InvalidOtpCode).max(6,t.InvalidOtpCode)})},u=e=>o(e).and(a(e))},53124:function(e,t,r){r.d(t,{Zu:function(){return o},kS:function(){return s},v6:function(){return a},x4:function(){return i}});var n=r(8447);let i=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"web",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"es-ES,es",s=await n.WY.post("/auth/".concat(e,"-login"),t,{headers:{app:r,"Accept-Language":i}}),o=await s.json();return(0,n.SW)({data:o,status:s.status})},s=async e=>{let{appHeader:t="web",lang:r="es-ES,es",accessToken:i}=e,s=await n.WY.post("/auth/logout",{},{headers:{"Accept-Language":r,app:t,Authorization:"Bearer ".concat(i)}}),o=await s.json();return(0,n.SW)({data:o,status:s.status})},o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"web",r=await n.WY.get("/auth/refresh",{headers:{Authorization:"Bearer ".concat(e),app:t}}),i=await r.json();return(0,n.SW)({data:i,status:r.status})},a=async e=>{let{appHeader:t="web",body:r,refreshTokenValue:i}=e,s=await n.WY.post("/auth/refresh",r,{headers:{Authorization:"Bearer ".concat(i),app:t}}),o=await s.json();return(0,n.SW)({data:o,status:s.status})}}}]);